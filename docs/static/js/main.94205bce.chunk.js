(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/tetris-bg.4ae866dc.mp3"},,function(e,t,a){e.exports=a(20)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(8),o=a.n(r),s=(a(16),a(0)),c=a(5),l=a(3),h=a(2),u=a(6),p=a(4);a(17);function f(e){var t=["pixel"];return e.isFilled&&t.push("pixel--filled"),i.a.createElement("div",{className:t.join(" ")})}f.defaultProps={isFilled:!1};var v=f;a(18);var d=function(e){for(var t=e.grid,a=t.rows,n=t.cols,r=t.map,o=[],s=0;s<a;s++){for(var c=[],l=0;l<n;l++)c.push(i.a.createElement(v,{key:"".concat(s,",").concat(l),isFilled:r[s][l]}));o.push(i.a.createElement("div",{key:"row-".concat(s)},c))}return i.a.createElement("div",{className:"grid"},o)},m=function(){function e(){Object(s.a)(this,e),this.size=0,this.orientations=null,this.position=[0,0],this.rotation=0}return Object(c.a)(e,[{key:"getOrientation",value:function(){return this.orientations[this.rotation]}},{key:"move",value:function(e){this.position[0]+=e[0],this.position[1]+=e[1]}},{key:"rotateClockwise",value:function(){this.rotation=(this.rotation+1)%this.orientations.length}},{key:"rotateAntiClockwise",value:function(){this.rotation=(this.rotation-1+this.orientations.length)%this.orientations.length}}]),e}(),w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).size=2,a.orientations=[[[1,1],[1,1]]],a}return Object(p.a)(t,e),t}(m),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).size=4,a.orientations=[[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]],a}return Object(p.a)(t,e),t}(m),b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).size=3,a.orientations=[[[0,0,1],[0,0,1],[0,1,1]],[[1,0,0],[1,1,1],[0,0,0]],[[1,1,0],[1,0,0],[1,0,0]],[[1,1,1],[0,0,1],[0,0,0]]],a}return Object(p.a)(t,e),t}(m),j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).size=3,a.orientations=[[[1,0,0],[1,0,0],[1,1,0]],[[0,0,1],[1,1,1],[0,0,0]],[[0,1,1],[0,0,1],[0,0,1]],[[1,1,1],[1,0,0],[0,0,0]]],a}return Object(p.a)(t,e),t}(m),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).size=3,a.orientations=[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]],a}return Object(p.a)(t,e),t}(m),g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).size=3,a.orientations=[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],a}return Object(p.a)(t,e),t}(m),y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).size=3,a.orientations=[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]],a}return Object(p.a)(t,e),t}(m),G={SQUARE:0,T:1,S:2,Z:3,BAR:4,L:5,FLIP_L:6},S=function e(){Object(s.a)(this,e)};S.getShapeByType=function(e){switch(e){case G.SQUARE:return new w;case G.T:return new g;case G.S:return new k;case G.Z:return new y;case G.BAR:return new O;case G.L:return new j;case G.FLIP_L:return new b;default:return new O}},S.getRandomShape=function(){var e=Object.keys(G).length,t=Math.floor(Math.random()*e);return S.getShapeByType(t)};var C=S,E=a(10),R=function(){function e(t,a){var n=this;Object(s.a)(this,e),this.findRowsToClear=function(){for(var e=[],t=0;t<n.rows;t++){for(var a=!0,i=0;i<n.cols;i++)a&=n.map[t][i];a&&e.push(t)}return e},this.clearRows=function(e){for(var t=e.length-1;t>=0;t--)n.map.splice(e[t],1);for(var a=0;a<e.length;a++){for(var i=[],r=0;r<n.cols;r++)i.push(!1);n.map.unshift(i)}},this.rows=t,this.cols=a,this.resetMap()}return Object(c.a)(e,[{key:"clone",value:function(){var t=new e(this.rows,this.cols);return t.copyMap(this),t}},{key:"resetMap",value:function(){this.map=[];for(var e=0;e<this.rows;e++){for(var t=[],a=0;a<this.cols;a++)t.push(!1);this.map.push(t)}}},{key:"copyMap",value:function(e){for(var t=0;t<this.rows;t++)for(var a=0;a<this.cols;a++)this.map[t][a]=e.map[t][a]}},{key:"addShape",value:function(e){for(var t=e.getOrientation(),a=e.size,n=Object(E.a)(e.position,2),i=n[0],r=n[1],o=0;o<a;o++)for(var s=0;s<a;s++)if(1===t[o][s]){var c=i+s,l=r+o;c>=0&&c<this.cols&&l>=0&&l<this.rows&&(this.map[l][c]=!0)}}},{key:"hasCollision",value:function(e){for(var t=e.getOrientation(),a=e.size,n=0;n<a;n++)for(var i=0;i<a;i++)if(1===t[n][i]){var r=e.position[0]+i,o=e.position[1]+n;if(o<0)continue;if(o>=this.rows)return!0;if(r<0||r>=this.cols)return!0;if(!0===this.map[o][r])return!0}return!1}},{key:"clearFullRows",value:function(){var e=this.findRowsToClear();this.clearRows(e)}}]),e}(),z=function e(t,a){var n=this;Object(s.a)(this,e),this.deregisterView=function(){n.view=null},this.startGame=function(){n.shape=null,n.unclearedGrid=new R(n.rows,n.cols),n.displayGrid=new R(n.rows,n.cols),n.isGameOver=!1,n.timer=setTimeout(n.doGameTick,500),n.getNextShape()},this.endGame=function(){n.isGameOver=!0},this.doGameTick=function(){n.isGameOver?(alert("Game Over!"),n.startGame()):(n.moveShapeDown(),n.timer=setTimeout(n.doGameTick,n.tickInterval))},this.getNextShape=function(){n.shape=C.getRandomShape(),n.shape.rotation=Math.floor(Math.random()*n.shape.orientations.length),n.shape.position=[Math.floor((n.cols-n.shape.size)/2),-n.shape.size]},this.moveShapeDown=function(){n.shape.move([0,1]),n.unclearedGrid.hasCollision(n.shape)&&(n.shape.move([0,-1]),n.shape.position[1]<0?n.endGame():(n.unclearedGrid.addShape(n.shape),n.unclearedGrid.clearFullRows(),n.getNextShape())),n.redraw()},this.moveShapeLeft=function(){n.shape.move([-1,0]),n.unclearedGrid.hasCollision(n.shape)?n.shape.move([1,0]):n.redraw()},this.moveShapeRight=function(){n.shape.move([1,0]),n.unclearedGrid.hasCollision(n.shape)?n.shape.move([-1,0]):n.redraw()},this.rotateShape=function(){n.shape.rotateClockwise(),n.unclearedGrid.hasCollision(n.shape)?n.shape.rotateAntiClockwise():n.redraw()},this.redraw=function(){n.displayGrid=n.unclearedGrid.clone(),n.displayGrid.addShape(n.shape),n.view&&n.view.setState({displayGrid:n.displayGrid})};var i=a.rows,r=a.cols,o=a.tickInterval;this.view=t,this.rows=i,this.cols=r,this.tickInterval=o},T=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).handleKeyDown=function(e){switch(e.keyCode){case 32:case 38:a.gameController.rotateShape();break;case 37:a.gameController.moveShapeLeft();break;case 39:a.gameController.moveShapeRight();break;case 40:a.gameController.moveShapeDown()}};var n=e.rows,i=e.cols,r=e.tickInterval;return a.gameController=new z(Object(u.a)(a),{rows:n,cols:i,tickInterval:r}),a.state={},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.gameController.startGame(),document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown),this.gameController.deregisterView()}},{key:"render",value:function(){var e=this.state.displayGrid;return i.a.createElement("div",null,e&&i.a.createElement(d,{grid:e}))}}]),t}(i.a.Component);T.defaultProps={rows:20,cols:10,tickInterval:400};var I=T,L=a(9),M=a.n(L);a(19);var x=function(){return i.a.createElement("div",{className:"app"},i.a.createElement("p",null,"Tetris using ",i.a.createElement("strong",null,"OOP")," approach"),i.a.createElement(I,{rows:20,cols:10,tickInterval:400}),i.a.createElement("audio",{src:M.a,type:"audio/mpeg",autoPlay:!0,loop:!0}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[11,1,2]]]);
//# sourceMappingURL=main.94205bce.chunk.js.map